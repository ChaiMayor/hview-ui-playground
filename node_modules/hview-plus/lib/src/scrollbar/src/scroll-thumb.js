"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue");require("../style/thumb.js");const z={name:"HThumb"},N=t.defineComponent({...z,props:{height:null,maxHeight:null,width:null,viewHeight:null,viewWidth:null,thumbHeight:null,thumbWidth:null,native:{type:Boolean},always:{type:Boolean},noresize:{type:Boolean},retio:null,move:null},emits:["update:isDraw","setScrollViewTop","setScrollViewLeft"],setup(v,{expose:g,emit:c}){const e=v,h=t.ref(0),m=t.ref(0),T=l=>{const o=e.viewHeight-i.value,u=l*i.value*e.retio/o;if(u>=r.value)return h.value=r.value;h.value=u},y=l=>{const o=e.viewWidth-n.value,u=l*n.value*e.retio/o;if(u>=r.value)return m.value=r.value;m.value=u},_=l=>{const o=Number(l*e.viewHeight/i.value).toFixed(5);c("setScrollViewTop",o)},X=l=>{const o=Number(l*e.viewWidth/n.value).toFixed(5);c("setScrollViewLeft",o)},w=(l,o)=>{let u=l;l<=0&&(l=0),l>=r.value&&(l=r.value,u=o==="moveX"?n.value:i.value),o==="moveX"?m.value=l:h.value=l,s.value=!0,c("update:isDraw",s.value),o==="moveX"?X(u):_(u)},a=t.ref({}),x=t.ref(null),i=t.ref(Number(parseInt(e.height))),n=t.ref(Number(parseInt(e.width))),r=t.ref(0),f=t.ref(!1),s=t.ref(!1),H=t.computed(()=>e.move==="moveX"?{width:`${e.width}px`}:{height:`${e.height}`}),S=t.computed(()=>e.move==="moveX"?{width:`${e.thumbWidth}px`,left:`${m.value}px`}:{height:`${e.thumbHeight}px`,top:`${h.value}px`}),W=t.computed(()=>e.viewWidth?!e.height&&!e.maxHeight&&e.viewWidth<=n.value:!e.height&&!e.maxHeight);function L(l,o){l.onmousedown=function(u){let p=o==="moveX"?u.pageX-l.offsetLeft:u.pageY-l.offsetTop;return document.onmousemove=function(b){let V=o==="moveX"?b.pageX-p:b.pageY-p;return w(V,o==="moveX"?"moveX":"moveY"),!1},document.onmouseup=function(){return document.onmousemove=null,document.onmouseup=null,document.onmousedown=null,t.nextTick(()=>{s.value=!1,c("update:isDraw",s.value)}),!1},!1}}const d=()=>{f.value||(f.value=!0,n.value=Number(parseInt(e.width)),i.value=Number(parseInt(e.height)),t.nextTick(()=>{r.value=e.move==="moveX"?n.value-a.value.offsetWidth:i.value-a.value.offsetHeight}),f.value=!1)};return t.watch(()=>e.height,()=>{e.noresize||d()}),t.watch(()=>e.viewHeight,()=>{e.noresize||d()}),t.onMounted(()=>{L(a.value,e.move==="moveX"?"moveX":"moveY"),d()}),t.onUnmounted(()=>{!a.value||(a.value.onmousedown=null)}),g({setScrollTop:T,setScrollLeft:y,handleDrawScrollVal:w}),(l,o)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"scrollbar_bar",ref:x,class:t.normalizeClass(["h-scrollbar__bar",v.move==="moveX"?"is-horizontal":"is-vertical",{show:s.value},{hide:t.unref(W)},{native:v.native},{always:v.always}]),style:t.normalizeStyle(t.unref(H))},[t.createElementVNode("div",{ref_key:"scrollbar_thumb",ref:a,class:"h-scrollbar__thumb",style:t.normalizeStyle(t.unref(S))},null,4)],6))}});exports.default=N;
