"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");require("../style/index.js");require("../style/drag.js");const B=require("./upload2.js"),C={class:"h-upload"},w=["multiple","accept"],y={key:0,class:"h-upload-image"},F={class:"preview-content"},L={class:"preview-images-list"},I={class:"view"},D={class:"preview-delete-icon"},S=["src"],T=["src"],b={class:"tip"},A={key:1,class:"h-upload-file"},U={class:"h-upload-content"},$=e.createElementVNode("div",{class:"h-upload-text"},[e.createTextVNode("\u5C06\u6587\u4EF6\u62D6\u62FD\u5230\u6B64\u5904\u6216"),e.createElementVNode("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1),j={class:"h-upload-list-content"},M={class:"h-upload-list"},q={class:"h-upload-list_item"},x={class:"h-upload-list_item-name"},O={class:"h-upload-list_item-status-label"},P={name:"HUpload"},R=e.defineComponent({...P,props:B.uploadProps,emits:["getFilesList"],setup(h,{emit:f}){const o=h;e.onMounted(()=>{!a.value||(a.value.addEventListener("drop",t=>{t.preventDefault(),t.dataTransfer.files&&(_(t.dataTransfer.files),s.value.push(...Array.from(t.dataTransfer.files)))},!1),a.value.addEventListener("dragover",t=>{t.preventDefault()},!1))});const p=e.ref(),a=e.ref(),s=e.ref([]),c=e.ref([]);e.ref(!1);const d=e.ref(!1),v=e.ref();e.ref("");const u=()=>p.value.click(),E=t=>{let l=t.target.files;!l||(_(l),s.value.push(...Array.from(l)),f("getFilesList",s.value))},k=t=>{s.value.splice(t,1)},_=t=>{for(let l=0;l<t.length;l++)c.value.push({url:URL.createObjectURL(t[l])})},V=t=>{d.value=!0,v.value=c.value[t].url},N=t=>{c.value.splice(t,1)};return(t,l)=>{const n=e.resolveComponent("h-icon"),g=e.resolveComponent("h-modal2");return e.openBlock(),e.createElementBlock("div",C,[e.withDirectives(e.createElementVNode("input",{ref_key:"hIpt",ref:p,type:"file",onChange:E,multiple:o.multiple,accept:o.accept},null,40,w),[[e.vShow,!1]]),o.type==="image"&&!t.drag?(e.openBlock(),e.createElementBlock("div",y,[e.createElementVNode("div",F,[e.createElementVNode("ul",L,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,(m,r)=>(e.openBlock(),e.createElementBlock("li",null,[e.createElementVNode("div",I,[e.createElementVNode("span",D,[e.createVNode(n,{name:"view",onClick:i=>V(r),class:"preview-icon"},null,8,["onClick"]),e.createVNode(n,{name:"delete",onClick:i=>N(r),class:"deletecon"},null,8,["onClick"])]),e.createElementVNode("img",{src:m.url,alt:""},null,8,S)]),e.createVNode(g,{show:d.value,"onUpdate:show":l[0]||(l[0]=i=>d.value=i)},{header:e.withCtx(()=>[e.createTextVNode(" \u67E5\u770B\u56FE\u7247 ")]),body:e.withCtx(()=>[e.createElementVNode("img",{src:v.value,alt:"\u65E0\u6CD5\u83B7\u53D6\u56FE\u7247\u4FE1\u606F",class:"modalImg"},null,8,T)]),_:1},8,["show"])]))),256)),e.createElementVNode("div",{class:"upload-area",onClick:u},[e.createElementVNode("div",null,[e.renderSlot(t.$slots,"uploadIcon",{},()=>[e.createVNode(n,{name:"view",class:"plusIcon"})])]),e.createElementVNode("div",b,[e.renderSlot(t.$slots,"tip",{},()=>[e.createTextVNode("\u70B9\u51FB\u4E0A\u4F20")])])])])])])):e.createCommentVNode("",!0),o.type==="file"?(e.openBlock(),e.createElementBlock("div",A,[o.drag?(e.openBlock(),e.createElementBlock("div",{key:1,class:"h-upload-dragger",ref_key:"fileArea",ref:a,onClick:u},[e.createElementVNode("div",U,[e.createVNode(n,{name:"delete-solid",class:"h-upload-icon"}),$])],512)):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:u},[e.renderSlot(t.$slots,"default")])),e.createElementVNode("div",j,[e.createElementVNode("div",M,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,(m,r)=>(e.openBlock(),e.createElementBlock("div",q,[e.createElementVNode("div",x,e.toDisplayString(m.name),1),e.createElementVNode("div",O,[e.createVNode(n,{name:"delete-solid",onClick:i=>k(r)},null,8,["onClick"])])]))),256))])])])):e.createCommentVNode("",!0)])}}});exports.default=R;
