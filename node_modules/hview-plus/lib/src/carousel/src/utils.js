"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const u=require("vue"),Z=require("@vueuse/core"),$=require("./carousel2.js"),T=require("@vue/shared"),m=l=>{const i=T.isArray(l)?l:[l],o=[];return i.forEach(t=>{var f;T.isArray(t)?o.push(...m(t)):u.isVNode(t)&&T.isArray(t.children)?o.push(...m(t.children)):(o.push(t),u.isVNode(t)&&((f=t.component)==null?void 0:f.subTree)&&o.push(...m(t.component.subTree)))}),o},x=(l,i,o)=>m(l.subTree).filter(a=>{var n;return u.isVNode(a)&&((n=a.type)==null?void 0:n.name)===i&&!!a.component}).map(a=>a.component.uid).map(a=>o[a]).filter(a=>!!a),H=(l,i)=>{const o={},t=u.shallowRef([]);return{children:t,addChild:n=>{o[n.uid]=n,t.value=x(l,i,o)},removeChild:n=>{delete o[n],t.value=t.value.filter(c=>c.uid!==n)}}},B=300,ee=(l,i,o)=>{const{children:t,addChild:f,removeChild:a}=H(u.getCurrentInstance(),"HCarouselItem"),n=u.ref(-1),c=u.ref(null),b=u.ref(!1),h=u.ref(),L=u.computed(()=>l.arrow!=="never"&&!u.unref(I)),q=u.computed(()=>t.value.some(e=>e.props.label.toString().length>0)),I=u.computed(()=>l.direction==="vertical"),R=e=>{let r=null;r||(r=setTimeout(()=>{v(e),r=null},B))},V=e=>{let r=null;r||(r=setTimeout(()=>{K(e),r=null},B))};function C(){c.value&&(clearInterval(c.value),c.value=null)}function g(){l.interval<=0||!l.autoplay||c.value||(c.value=setInterval(()=>_(),l.interval))}const _=()=>{n.value<t.value.length-1?n.value=n.value+1:l.loop&&(n.value=0)};function v(e){if(T.isString(e)){const d=t.value.filter(A=>A.props.name===e);d.length>0&&(e=t.value.indexOf(d[0]))}if(e=Number(e),Number.isNaN(e)||e!==Math.floor(e)){console.error(o,"index\u5FC5\u987B\u662F\u6570\u5B57");return}const r=t.value.length,s=n.value;e<0?n.value=l.loop?r-1:0:e>=r?n.value=l.loop?0:r-1:n.value=e,s===n.value&&w(s),N()}function w(e){t.value.forEach((r,s)=>{r.translateItem(s,n.value,e)})}function F(e,r){var E,M,S,p;const s=u.unref(t),d=s.length;if(d===0||!e.states.inStage)return!1;const A=r+1,J=r-1,O=d-1,Q=s[O].states.active,W=s[0].states.active,X=(M=(E=s[A])==null?void 0:E.states)==null?void 0:M.active,Y=(p=(S=s[J])==null?void 0:S.states)==null?void 0:p.active;return r===O&&W||X?"left":r===0&&Q||Y?"right":!1}function P(){b.value=!0,l.pauseOnHover&&C()}function j(){b.value=!1,g()}function k(e){u.unref(I)||t.value.forEach((r,s)=>{e===F(r,s)&&(r.states.hover=!0)})}function z(){u.unref(I)||t.value.forEach(e=>{e.states.hover=!1})}function D(e){n.value=e}function K(e){l.trigger==="hover"&&e!==n.value&&(n.value=e)}function U(){v(n.value-1)}function G(){v(n.value+1)}function N(){C(),g()}u.watch(()=>n.value,(e,r)=>{w(r),r>-1&&i("change",e,r)}),u.watch(()=>l.autoplay,e=>{e?g():C()}),u.watch(()=>l.loop,()=>{v(n.value)}),u.watch(()=>l.interval,()=>{N()}),u.watch(()=>t.value,()=>{t.value.length>0&&v(l.initialIndex)});const y=u.shallowRef();return u.onMounted(()=>{y.value=Z.useResizeObserver(h.value,()=>{w()}),g()}),u.onBeforeUnmount(()=>{C(),h.value&&y.value&&y.value.stop()}),u.provide($.carouselContextKey,{root:h,isVertical:I,items:t,loop:l.loop,addItem:f,removeItem:a,setActiveItem:v}),{root:h,activeIndex:n,arrowDisplay:L,hasLabel:q,hover:b,items:t,handleButtonEnter:k,handleButtonLeave:z,handleIndicatorClick:D,handleMouseEnter:P,handleMouseLeave:j,setActiveItem:v,prev:U,next:G,throttledArrowClick:R,throttledIndicatorHover:V}};exports.flattedChildren=m;exports.useCarousel=ee;exports.useOrderedChildren=H;
