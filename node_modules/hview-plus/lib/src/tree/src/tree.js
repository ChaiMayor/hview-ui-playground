"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("vue");require("../style/index.js");const K=require("./treeNode.js"),w=require("@hview-plus/utils"),B=require("./tree2.js"),E={class:"h-tree"},N={name:"HTree"},q=l.defineComponent({...N,props:B.TreeProps,emits:["toggle-change","checked-change"],setup(f,{expose:p,emit:t}){const r=f,a=l.ref([]),h=l.ref(r.defaultCheckedKeys);l.watch(()=>r.data,n=>{console.log(n)},{immediate:!0}),l.onMounted(()=>{u(w.deepCopy(r.data))});const u=n=>{a.value=n.map(e=>(e.children=e[r.children]||[],e.label=e[r.label],e.id=e[r.nodeKey],e.isOpen=!1,e.isChecked=!1,e.children&&e.children.length&&u(e.children),{id:e.id,label:e.label,children:e.children,isOpen:e.isOpen,isChecked:e.isChecked,disabled:e.disabled}))},g=()=>{i(a.value)},C=n=>{t("toggle-change",n)},b=n=>{const e=s();t("checked-change",e,n)},i=n=>{n.forEach(e=>{let d,c,o;if(e.children&&e.children.length){i(e.children);const k=e.children;o=k.filter(x=>x.isChecked),o.length===0?(d=!1,c=!1):o.length===k.length?(d=!0,c=!1):(d=!1,c=!0),e.isChecked=d,e.indeterminate=c}})},y=n=>{!r.showCheckbox||(h.value=n)},v=()=>s().map(n=>n.id),s=()=>{const n=[],e=function(d){d.forEach(c=>{c.isChecked&&n.push({id:c.id,label:c.label,children:c.children?c.children:[]}),c.children&&c.children.length&&e(c.children)})};return e(a.value),n};return l.provide("checkboxChange",g),l.provide("toggle-change",C),l.provide("checked-change",b),p({setCheckedKeys:y,getCheckedKeys:v,getCheckedNodes:s}),(n,e)=>(l.openBlock(),l.createElementBlock("div",E,[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(a.value,(d,c)=>(l.openBlock(),l.createBlock(K.default,{key:c,items:d,label:n.label,children:n.children,"show-checkbox":n.showCheckbox,index:0,"node-key":n.nodeKey,"default-expanded-keys":n.defaultExpandedKeys,"default-checked-keys":h.value,"default-expand-all":n.defaultExpandAll,"render-content":n.renderContent,"parent-data":a.value},null,8,["items","label","children","show-checkbox","node-key","default-expanded-keys","default-checked-keys","default-expand-all","render-content","parent-data"]))),128))]))}});exports.default=q;
