"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");require("../style/index.js");const u=require("@vue/shared"),E=require("./progress2.js"),z=["aria-valuenow"],_={key:0,class:"h-progress-bar"},D={key:0,class:"h-progress-bar-innerText"},N={viewBox:"0 0 100 100"},P=["d","stroke-width"],T=["d","stroke","opacity","stroke-linecap","stroke-width"],V={key:0},x={name:"HProgress"},I=e.defineComponent({...x,props:E.progressProps,setup(k){const r=k,p={success:"#67c23a",error:"#f56c6c",warning:"#e6a23c",default:"#20a0ff"},y=e.computed(()=>{const{status:t,type:s,showText:n,textInside:o}=r;return{[`h-progress--${s}`]:s,[`h-progress--${t}`]:t,["h-progress-without-text"]:!n,["h-progress-text-inside"]:o}}),v=e.computed(()=>({width:`${r.percentage}%`,animationDuration:`${r.duration}s`,backgroundColor:g(r.percentage)})),c=e.computed(()=>(r.strokeWidth/r.width*100).toFixed(1)),d=e.computed(()=>["circle","dashboard"].includes(r.type)?Number.parseInt(`${50-Number.parseFloat(c.value)/2}`,10):0),h=e.computed(()=>{const t=d.value,s=r.type==="dashboard";return`
          M 50 50
          m 0 ${s?"":"-"}${t}
          a ${t} ${t} 0 1 1 0 ${s?"-":""}${t*2}
          a ${t} ${t} 0 1 1 0 ${s?"":"-"}${t*2}
          `}),l=e.computed(()=>2*Math.PI*d.value),i=e.computed(()=>r.type==="dashboard"?.75:1),m=e.computed(()=>`${-1*l.value*(1-i.value)/2}px`),$=e.computed(()=>({strokeDasharray:`${l.value*i.value}px, ${l.value}px`,strokeDashoffset:m.value})),S=e.computed(()=>({strokeDasharray:`${l.value*i.value*(r.percentage/100)}px, ${l.value}px`,strokeDashoffset:m.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),w=e.computed(()=>{let t;return r.color?t=g(r.percentage):t=p[r.status]||p.default,t}),B=e.computed(()=>r.status==="warning"?"warning":r.status==="success"?"success":"close"),b=e.computed(()=>r.type==="line"?12+r.strokeWidth*.4:r.width*.111111+2),f=e.computed(()=>r.format(r.percentage));function C(t){const s=100/t.length;return t.map((o,a)=>u.isString(o)?{color:o,percentage:(a+1)*s}:o).sort((o,a)=>o.percentage-a.percentage)}const g=t=>{var n;const{color:s}=r;if(u.isFunction(s))return s(t);if(u.isString(s))return s;{const o=C(s);for(const a of o)if(a.percentage>t)return a.color;return(n=o[o.length-1])==null?void 0:n.color}};return(t,s)=>{const n=e.resolveComponent("h-icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["h-progress",e.unref(y)]),role:"progressbar","aria-valuenow":t.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[t.type==="line"?(e.openBlock(),e.createElementBlock("div",_,[e.createElementVNode("div",{class:"h-progress-bar-outer",style:e.normalizeStyle({height:`${t.strokeWidth}px`})},[e.createElementVNode("div",{class:e.normalizeClass(["h-progress-bar-inner",{["h-progress-bar-innerindeterminate"]:t.indeterminate}]),style:e.normalizeStyle(e.unref(v))},[(t.showText||t.$slots.default)&&t.textInside?(e.openBlock(),e.createElementBlock("div",D,[e.renderSlot(t.$slots,"default",{percentage:t.percentage},()=>[e.createElementVNode("span",null,e.toDisplayString(e.unref(f)),1)])])):e.createCommentVNode("",!0)],6)],4)])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"h-progress-circle",style:e.normalizeStyle({height:`${t.width}px`,width:`${t.width}px`})},[(e.openBlock(),e.createElementBlock("svg",N,[e.createElementVNode("path",{class:"h-progress-circle-track",d:e.unref(h),stroke:"#e5e9f2","stroke-width":e.unref(c),fill:"none",style:e.normalizeStyle(e.unref($))},null,12,P),e.createElementVNode("path",{class:"h-progress-circle-path",d:e.unref(h),stroke:e.unref(w),fill:"none",opacity:t.percentage?1:0,"stroke-linecap":t.strokeLinecap,"stroke-width":e.unref(c),style:e.normalizeStyle(e.unref(S))},null,12,T)]))],4)),(t.showText||t.$slots.default)&&!t.textInside?(e.openBlock(),e.createElementBlock("div",{key:2,class:"h-progress-text",style:e.normalizeStyle({fontSize:`${e.unref(b)}px`})},[e.renderSlot(t.$slots,"default",{percentage:t.percentage},()=>[t.status?(e.openBlock(),e.createBlock(n,{key:1,name:e.unref(B)},null,8,["name"])):(e.openBlock(),e.createElementBlock("span",V,e.toDisplayString(e.unref(f)),1))])],4)):e.createCommentVNode("",!0)],10,z)}}});exports.default=I;
